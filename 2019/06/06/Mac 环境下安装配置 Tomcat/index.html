
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>Mac 环境下安装配置 Tomcat | DevZhang的博客小屋</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="CSAMEN">
    

    
    <meta name="description" content="Tomcat 简介直接引用 wikipedia 的解释: 

Tomcat 是由 Apache 软件基金会属下 Jakarta 项目开发的 Servlet 容器，按照 Sun Microsystems 提供的技术规范，实现了对 Servlet 和 JavaServer Page（JSP）的支持，并提供了作为 Web 服务器的一些特有功能，如 Tomcat 管理和控制平台、安全局管理和 Tomcat">
<meta property="og:type" content="article">
<meta property="og:title" content="Mac 环境下安装配置 Tomcat">
<meta property="og:url" content="http://yoursite.com/2019/06/06/Mac 环境下安装配置 Tomcat/index.html">
<meta property="og:site_name" content="DevZhang的博客小屋">
<meta property="og:description" content="Tomcat 简介直接引用 wikipedia 的解释: 

Tomcat 是由 Apache 软件基金会属下 Jakarta 项目开发的 Servlet 容器，按照 Sun Microsystems 提供的技术规范，实现了对 Servlet 和 JavaServer Page（JSP）的支持，并提供了作为 Web 服务器的一些特有功能，如 Tomcat 管理和控制平台、安全局管理和 Tomcat">
<meta property="og:image" content="http://yoursite.com/images/15598077133968.jpg">
<meta property="og:image" content="http://yoursite.com/images/15598077223477.jpg">
<meta property="og:image" content="http://yoursite.com/images/15598077322187.jpg">
<meta property="og:image" content="http://yoursite.com/images/15598077490924.jpg">
<meta property="og:image" content="http://yoursite.com/images/15598077569382.jpg">
<meta property="og:image" content="http://yoursite.com/images/15598077646021.jpg">
<meta property="og:image" content="http://yoursite.com/images/15598077725377.jpg">
<meta property="og:updated_time" content="2019-06-06T07:56:29.351Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Mac 环境下安装配置 Tomcat">
<meta name="twitter:description" content="Tomcat 简介直接引用 wikipedia 的解释: 

Tomcat 是由 Apache 软件基金会属下 Jakarta 项目开发的 Servlet 容器，按照 Sun Microsystems 提供的技术规范，实现了对 Servlet 和 JavaServer Page（JSP）的支持，并提供了作为 Web 服务器的一些特有功能，如 Tomcat 管理和控制平台、安全局管理和 Tomcat">
<meta name="twitter:image" content="http://yoursite.com/images/15598077133968.jpg">

    
    <link rel="alternative" href="/atom.xml" title="DevZhang的博客小屋" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="DevZhang的博客小屋">DevZhang的博客小屋</a></h1>
				<h2 class="blog-motto">有生之莲</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:yoursite.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/06/06/Mac 环境下安装配置 Tomcat/" title="Mac 环境下安装配置 Tomcat" itemprop="url">Mac 环境下安装配置 Tomcat</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="CSAMEN" target="_blank" itemprop="author">CSAMEN</a>
		
  <p class="article-time">
    <time datetime="2019-06-06T07:54:30.000Z" itemprop="datePublished"> 发表于 2019-06-06</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		
			<ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Tomcat-简介"><span class="toc-number">1.</span> <span class="toc-text">Tomcat 简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#下载"><span class="toc-number">2.</span> <span class="toc-text">下载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#设置本地存放路径"><span class="toc-number">3.</span> <span class="toc-text">设置本地存放路径</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#目录结构"><span class="toc-number">4.</span> <span class="toc-text">目录结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#bin"><span class="toc-number">4.1.</span> <span class="toc-text">bin</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#conf"><span class="toc-number">4.2.</span> <span class="toc-text">conf</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#lib"><span class="toc-number">4.3.</span> <span class="toc-text">lib</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#logs"><span class="toc-number">4.4.</span> <span class="toc-text">logs</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#temp"><span class="toc-number">4.5.</span> <span class="toc-text">temp</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#webapps"><span class="toc-number">4.6.</span> <span class="toc-text">webapps</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#work"><span class="toc-number">4.7.</span> <span class="toc-text">work</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#启动-amp-关闭-Tomcat"><span class="toc-number">5.</span> <span class="toc-text">启动&关闭 Tomcat</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#补充"><span class="toc-number">6.</span> <span class="toc-text">补充</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Servlet"><span class="toc-number">6.1.</span> <span class="toc-text">Servlet</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#工作模式"><span class="toc-number">6.1.1.</span> <span class="toc-text">工作模式</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#生命周期"><span class="toc-number">6.2.</span> <span class="toc-text">生命周期</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#与-JSP-的关系"><span class="toc-number">6.3.</span> <span class="toc-text">与 JSP 的关系</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#参考"><span class="toc-number">7.</span> <span class="toc-text">参考</span></a></li></ol>
		
		</div>
		
		<h3 id="Tomcat-简介"><a href="#Tomcat-简介" class="headerlink" title="Tomcat 简介"></a>Tomcat 简介</h3><p>直接引用 <a href="https://zh.wikipedia.org/wiki/Apache_Tomcat" target="_blank" rel="external">wikipedia</a> 的解释: </p>
<blockquote>
<p>Tomcat 是由 Apache 软件基金会属下 Jakarta 项目开发的 Servlet 容器，按照 Sun Microsystems 提供的技术规范，实现了对 Servlet 和 JavaServer Page（JSP）的支持，并提供了作为 Web 服务器的一些特有功能，如 Tomcat 管理和控制平台、安全局管理和 Tomcat 阀等。由于 Tomcat 本身也内含了 HTTP 服务器，因此也可以视作单独的 Web 服务器。但是，不能将 Tomcat 和 Apache HTTP 服务器混淆，Apache HTTP 服务器是用 C 语言实现的 HTTP Web 服务器；这两个 HTTP web server 不是捆绑在一起的。Apache Tomcat 包含了配置管理工具，也可以通过编辑 XML 格式的配置文件来进行配置。</p>
</blockquote>
<h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><p>登录 <a href="https://tomcat.apache.org/download-90.cgi" target="_blank" rel="external">Tomcat 官网</a> 左边选择想要下载的版本，直接下载即可，这里选的是最新的 Tomcat 9：</p>
<p><img src="/images/15598077133968.jpg" alt="-w1349"></p>
<h3 id="设置本地存放路径"><a href="#设置本地存放路径" class="headerlink" title="设置本地存放路径"></a>设置本地存放路径</h3><p>将上一步下载下来的压缩文件解压放到你想要存放的位置：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/Users/cszrz/Dev/Java/apache-tomcat-9.0.20</span><br></pre></td></tr></table></figure></p>
<h3 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h3><p><img src="/images/15598077223477.jpg" alt="-w196"></p>
<h4 id="bin"><a href="#bin" class="headerlink" title="bin"></a>bin</h4><p>主要存放 Tomcat 相关命令，一类以 .sh 结尾（linux），一个是以 .bat 结尾（windows）。最常用的就是启动(startup.sh )和关闭(shutdown.sh)的命令 </p>
<h4 id="conf"><a href="#conf" class="headerlink" title="conf"></a>conf</h4><p>顾名思义，存放一些配置文件<br><img src="/images/15598077322187.jpg" alt="-w194"></p>
<ul>
<li>server.xml可以设置端口号、设置域名或IP、默认加载的项目、请求编码 </li>
<li>web.xml可以设置tomcat支持的文件类型 </li>
<li>context.xml可以用来配置数据源之类的 </li>
<li>tomcat-users.xml用来配置管理tomcat的用户与权限 </li>
<li>在Catalina目录下可以设置默认加载的项目</li>
</ul>
<h4 id="lib"><a href="#lib" class="headerlink" title="lib"></a>lib</h4><p>存放 Tomcat 运行需要的一些 jar 包</p>
<h4 id="logs"><a href="#logs" class="headerlink" title="logs"></a>logs</h4><p>logs 目录用来存放 Tomcat 在运行过程中产生的日志文件，非常重要的是在控制台输出的日志</p>
<h4 id="temp"><a href="#temp" class="headerlink" title="temp"></a>temp</h4><p>运行过程中产生的临时文件</p>
<h4 id="webapps"><a href="#webapps" class="headerlink" title="webapps"></a>webapps</h4><p>webapp s目录用来存放应用程序，当 Tomcat 启动时会去加载 webapps 目录下的应用程序。可以以文件夹、war 包、jar 包的形式发布应用。 当然，你也可以把应用程序放置在磁盘的任意位置，在配置文件中映射好就行。</p>
<h4 id="work"><a href="#work" class="headerlink" title="work"></a>work</h4><p>用来存放 Tomact 在运行时的编译文件。</p>
<h3 id="启动-amp-关闭-Tomcat"><a href="#启动-amp-关闭-Tomcat" class="headerlink" title="启动&amp;关闭 Tomcat"></a>启动&amp;关闭 Tomcat</h3><p>我们直接 cd 到安装目录 bin 文件夹下，执行启动脚本，直接执行的话会提示没有权限<br><img src="/images/15598077490924.jpg" alt="-w491"></p>
<p>我们可以执行 <strong>sudo chmod 755 *.sh</strong> 提供读 写 执行的权限，然后再重新启动<br><img src="/images/15598077569382.jpg" alt="-w563"></p>
<p>这里看到 Tomcat 应该是启动了，打开浏览器输入地址 <strong><a href="http://localhost:8080/" target="_blank" rel="external">http://localhost:8080/</a></strong> 验证下一下：<br><img src="/images/15598077646021.jpg" alt="-w1142"></p>
<p>说明成功~</p>
<p>关闭 Tomcat 的话，直接执行 ./shutdown.sh<br><img src="/images/15598077725377.jpg" alt="-w569"></p>
<h3 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h3><h4 id="Servlet"><a href="#Servlet" class="headerlink" title="Servlet"></a>Servlet</h4><blockquote>
<p>Servlet（Server Applet），全称 Java Servlet，未有中文译文。是用 Java 编写的服务器端程序。其主要功能在于交互式地浏览和修改数据，生成动态 Web 内容。狭义的 Servlet 是指 Java 语言实现的一个接口，广义的 Servlet 是指任何实现了这个 Servlet 接口的类，一般情况下，人们将 Servlet 理解为后者。Servlet 运行于支持 Java 的应用服务器中。从实现上讲，Servlet 可以响应任何类型的请求，但绝大多数情况下 Servlet 只用来扩展基于 HTTP 协议的 Web 服务器。最早支持 Servlet 标准的是 JavaSoft 的 Java Web Server。此后，一些其它的基于 Java 的 Web 服务器开始支持标准的 Servlet。</p>
</blockquote>
<h5 id="工作模式"><a href="#工作模式" class="headerlink" title="工作模式"></a>工作模式</h5><ul>
<li>客户端发送请求至服务器</li>
<li>服务器启动并调用Servlet，Servlet根据客户端请求生成响应内容并将其传给服务器</li>
<li>服务器将响应返回客户端</li>
<li>其他</li>
</ul>
<h4 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h4><p>当servlet被部署在应用服务器中（应用服务器中用于管理Java组件的部分被抽象成为容器）以后，由容器控制servlet的生命周期。除非特殊指定，否则在容器启动的时候，servlet是不会被加载的，servlet只会在第一次请求的时候被加载和实例化。servlet一旦被加载，一般不会从容器中删除，直至应用服务器关闭或重新启动。但当容器做内存回收动作时，servlet有可能被删除。也正是因为这个原因，第一次访问servlet所用的时间要大大多于以后访问所用的时间。</p>
<p>servlet在服务器的运行生命周期为，在第一次请求（或其实体被内存垃圾回收后再被访问）时被加载并执行一次初始化方法，跟着执行正式运行方法，之后会被常驻并每次被请求时直接执行正式运行方法，直到服务器关闭或被清理时执行一次销毁方法后实体销毁。</p>
<h4 id="与-JSP-的关系"><a href="#与-JSP-的关系" class="headerlink" title="与 JSP 的关系"></a>与 JSP 的关系</h4><p>Java服务器页面（JSP）是HttpServlet的扩展。由于HttpServlet大多是用来响应HTTP请求，并返回Web页面（例如HTML、XML），所以不可避免地，在编写servlet时会涉及大量的HTML内容，这给servlet的书写效率和可读性带来很大障碍，JSP便是在这个基础上产生的。其功能是使用HTML的书写格式，在适当的地方加入Java代码片段，将程序员从复杂的HTML中解放出来，更专注于servlet本身的内容。</p>
<p>JSP在首次被访问的时候被应用服务器转换为servlet，在以后的运行中，容器直接调用这个servlet，而不再访问JSP页面。JSP的实质仍然是servlet。</p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a href="https://zh.wikipedia.org/wiki/Apache_Tomcat" target="_blank" rel="external">Apache Tomcat</a><br><a href="https://zh.wikipedia.org/wiki/Java_Servlet" target="_blank" rel="external">Java Servlet</a><br><a href="https://blog.csdn.net/qq_31887989/article/details/79242042" target="_blank" rel="external">Tomcat9 目录结构</a></p>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">


</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://yoursite.com/2019/06/06/Mac 环境下安装配置 Tomcat/" data-title="Mac 环境下安装配置 Tomcat | DevZhang的博客小屋" data-tsina="null" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 

<div class="next">
<a href="/2019/05/26/mac 配置 Java 环境/"  title="mac 配置 Java 环境">
 <strong>下一篇：</strong><br/> 
 <span>mac 配置 Java 环境
</span>
</a>
</div>

</nav>

	

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
 
 <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Tomcat-简介"><span class="toc-number">1.</span> <span class="toc-text">Tomcat 简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#下载"><span class="toc-number">2.</span> <span class="toc-text">下载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#设置本地存放路径"><span class="toc-number">3.</span> <span class="toc-text">设置本地存放路径</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#目录结构"><span class="toc-number">4.</span> <span class="toc-text">目录结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#bin"><span class="toc-number">4.1.</span> <span class="toc-text">bin</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#conf"><span class="toc-number">4.2.</span> <span class="toc-text">conf</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#lib"><span class="toc-number">4.3.</span> <span class="toc-text">lib</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#logs"><span class="toc-number">4.4.</span> <span class="toc-text">logs</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#temp"><span class="toc-number">4.5.</span> <span class="toc-text">temp</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#webapps"><span class="toc-number">4.6.</span> <span class="toc-text">webapps</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#work"><span class="toc-number">4.7.</span> <span class="toc-text">work</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#启动-amp-关闭-Tomcat"><span class="toc-number">5.</span> <span class="toc-text">启动&关闭 Tomcat</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#补充"><span class="toc-number">6.</span> <span class="toc-text">补充</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Servlet"><span class="toc-number">6.1.</span> <span class="toc-text">Servlet</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#工作模式"><span class="toc-number">6.1.1.</span> <span class="toc-text">工作模式</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#生命周期"><span class="toc-number">6.2.</span> <span class="toc-text">生命周期</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#与-JSP-的关系"><span class="toc-number">6.3.</span> <span class="toc-text">与 JSP 的关系</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#参考"><span class="toc-number">7.</span> <span class="toc-text">参考</span></a></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  


  

  

  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="https://coderq.com" target="_blank" title="一个面向程序员交流分享的新一代社区">码农圈</a>
            
          </li>
        
          <li>
            
            	<a href="http://wuchong.me" target="_blank" title="Jark&#39;s Blog">Jark&#39;s Blog</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

  <div class="weiboshow">
  <p class="asidetitle">新浪微博</p>
    <iframe width="100%" height="119" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=119&fansRow=2&ptype=1&speed=0&skin=9&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=null&verifier=&dpc=1"></iframe>
</div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	
	<section class="info">
		<p> 积跬步以至千里 <br/>
			凭栏眺望会有时</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2019 
		
		<a href="/about" target="_blank" title="CSAMEN">CSAMEN</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>









<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
